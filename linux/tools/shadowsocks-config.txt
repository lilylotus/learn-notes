服务端：
1. install

yum clean all && yum makecache && systemctl stop firewalld && yum install -y net-tools vim epel-release gcc automake make python-setuptools m2crypto supervisor && easy_install pip && pip install shadowsocks
yum install -y python-setuptools m2crypto supervisor
easy_install pip
pip install shadowsocks

2、配置
新建/etc/shadowsocks.json文件
{
    "server": "0.0.0.0",
    "server_port": 3689,
    "local_address": "127.0.0.1",
    "local_port": 1080,
    "password": "shadowsocks#aliyun$300",
    "timeout": 300,
    "method": "rc4-md5",
    "fast_open": false
}

多用户多端口配置文件
配置文件路径：/etc/shadowsocks.json
{
    "server":"0.0.0.0",
    "local_address":"127.0.0.1",
    "local_port":1080,
    "port_password":{
        "8989":"password0",
        "9001":"password1",
        "9002":"password2",
        "9003":"password3",
        "9004":"password4"
    },
    "timeout":300,
    "method":"rc4-md5",
    "fast_open": false
}

ssserver -c /etc/shadowsocks.json
ssserver -c /etc/shadowsocks.json -d start
ssserver -c /etc/shadowsocks.json -d stop
====================================================

1. install (客户端)
sudo yum -y install epel-release
sudo yum -y install python-pip

安装Shadowsocks客户端
sudo pip install shadowsocks

配置Shadowsocks客户端
sudo mkdir /etc/shadowsocks
sudo vi /etc/shadowsocks/shadowsocks.json

{
    "server":"10.10.10.10",
    "server_port":11211,
    "local_address": "127.0.0.1",
    "local_port":1080,
    "password":"password",
    "timeout":300,
    "method":"aes-256-cfb",
    "fast_open": false,
    "workers": 1
}

server：Shadowsocks服务器地址
server_port：Shadowsocks服务器端口
local_address：本地IP
local_port：本地端口
password：Shadowsocks连接密码
timeout：等待超时时间
method：加密方式
workers:工作线程数
fast_open：true或false。开启fast_open以降低延迟，但要求Linux内核在3.7+。

配置自启动
新建启动脚本文件/etc/systemd/system/shadowsocks.service，内容如下：

[Unit]
Description=Shadowsocks
[Service]
TimeoutStartSec=0
ExecStart=/usr/bin/sslocal -c /etc/shadowsocks/shadowsocks.json
[Install]
WantedBy=multi-user.target

启动Shadowsocks客户端
systemctl enable shadowsocks.service
systemctl start shadowsocks.service
systemctl status shadowsocks.service

验证Shadowsocks客户端是否正常运行：
curl --socks5 127.0.0.1:1080 http://httpbin.org/ip

若Shadowsock客户端已正常运行，则结果如下：
{
  "origin": "10.10.10.10"       #你的Shadowsock服务器IP
}

=======================================================
2. 安装配置Privoxy
Shadowsocks是一个 socket5 服务，我们需要使用 Privoxy 把流量转到 http／https 上

sudo yum -y install privoxy

systemctl enable privoxy
systemctl start privoxy
systemctl status privoxy

配置Privoxy
修改配置文件/etc/privoxy/config
sudo vi /etc/privoxy/config

确保如下内容没有被注释掉
listen-address 127.0.0.1:8118 # 8118 是默认端口，不用改
forward-socks5t / 127.0.0.1:1080 . #转发到本地端口，注意最后有个点
(127.0.0.1：1080是shadowsocks的客户端的IP和端口，要与上面shadowsocks里的配置相符。)

设置http/https代理
修改配置文件/etc/profile
sudo vi /etc/profile

添加如下信息：
export http_proxy=http://127.0.0.1:8118
export https_proxy=http://127.0.0.1:8118
source /etc/profile
注：端口和 privoxy 中的监听端口保持一致
PROXY_HOST=127.0.0.1
export all_proxy=http://$PROXY_HOST:8118
export ftp_proxy=http://$PROXY_HOST:8118
export http_proxy=http://$PROXY_HOST:8118
export https_proxy=http://$PROXY_HOST:8118
export no_proxy=localhost,172.16.0.0/16,192.168.0.0/16.,127.0.0.1,10.10.0.0/16

验证是否可用
curl www.google.com

=================================================
{
    "server":"47.52.61.133",
    "server_port":3689,
    "local_port":1080,
    "password":"shadowsocks#aliyun$300",
    "timeout":300,
    "method":"rc4-md5",
    "fast_open": true,
	"workers": 1
}

===============================================================