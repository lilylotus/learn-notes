### 日志框架

#### Log4j
Log4j 应该说是 Java 领域资格最老，应用最广的日志工具。从诞生之日到现在一直广受业界欢迎。

Log4j 是高度可配置的，并可通过在运行时的外部文件配置。它根据记录的优先级别，并提供机制，以指示记录信息到许多的目的地，诸如：数据库，文件，控制台，UNIX 系统日志等。

Log4j 中有三个主要组成部分：
+ loggers - 负责捕获记录信息。
+ appenders - 负责发布日志信息，以不同的首选目的地。
+ layouts - 负责格式化不同风格的日志信息。

#### Logback
Logback 是由 log4j 创始人 Ceki Gulcu 设计的又一个开源日记组件，目标是替代 log4j。

logback 当前分成三个模块：logback-core、logback-classic 和 logback-access。
+ logback-core - 是其它两个模块的基础模块。
+ logback-classic - 是 log4j 的一个 改良版本。此外 logback-classic 完整实现 SLF4J API 使你可以很方便地更换成其它日记系统如 log4j 或 JDK14 Logging。
+ logback-access - 访问模块与 Servlet 容器集成提供通过 Http 来访问日记的功能。

#### Log4j2
按照官方的说法，Log4j2 是 Log4j 和 Logback 的替代。

#### Log4j vs Logback vs Log4j2
按照官方的说法，Log4j2 大大优于 Log4j 和 Logback。

那么，Log4j2 相比于先问世的 Log4j 和 Logback，它具有哪些优势呢？

1. Log4j2 旨在用作审计日志记录框架。 Log4j 1.x 和 Logback 都会在重新配置时丢失事件。 Log4j 2 不会。在 Logback 中，Appender 中的异常永远不会对应用程序可见。在 Log4j 中，可以将 Appender 配置为允许异常渗透到应用程序。
2. Log4j2 在多线程场景中，异步 Loggers 的吞吐量比 Log4j 1.x 和 Logback 高 10 倍，延迟低几个数量级。
3. Log4j2 对于独立应用程序是无垃圾的，对于稳定状态日志记录期间的 Web 应用程序来说是低垃圾。这减少了垃圾收集器的压力，并且可以提供更好的响应时间性能。
4. Log4j2 使用插件系统，通过添加新的 Appender、Filter、Layout、Lookup 和 Pattern Converter，可以非常轻松地扩展框架，而无需对 Log4j 进行任何更改。
5. 由于插件系统配置更简单。配置中的条目不需要指定类名。
6. 支持自定义日志等级。
7. 支持 lambda 表达式。
8. 支持消息对象。
9. Log4j 和 Logback 的 Layout 返回的是字符串，而 Log4j2 返回的是二进制数组，这使得它能被各种 Appender 使用。
10. Syslog Appender 支持 TCP 和 UDP 并且支持 BSD 系统日志。
11. Log4j2 利用 Java5 并发特性，尽量小粒度的使用锁，减少锁的开销。


### 实施日志解决方案

#### 引入 jar 包
首选推荐使用 slf4j + logback 的组合。
强烈建议不要直接使用日志实现组件(logback、log4j、java.util.logging)，理由就是无法灵活替换日志库。


#### slf4j + logback
logback-classic-1.0.13.jar 会自动将 slf4j-api-1.7.21.jar 和 logback-core-1.0.13.jar 也添加
```xml
<dependency>
  <groupId>ch.qos.logback</groupId>
  <artifactId>logback-classic</artifactId>
  <version>1.0.13</version>
</dependency>
```

#### slf4j + log4j
slf4j-log4j12-1.7.21.jar 会自动将 slf4j-api-1.7.21.jar 和 log4j-1.2.17.jar 也添加
```xml
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>1.7.21</version>
</dependency>
```

#### slf4j + java.util.logging
slf4j-jdk14-1.7.21.jar 会自动将 slf4j-api-1.7.21.jar 也添加
```xml
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-jdk14</artifactId>
  <version>1.7.21</version>
</dependency>
```

#### slf4j 兼容 log4j
```xml
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>log4j-over-slf4j</artifactId>
    <version>1.7.12</version>
</dependency>
```

#### slf4j 兼容 common-logging
```xml
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jcl-over-slf4j</artifactId>
  <version>1.7.12</version>
</dependency>
```