##### `HashMap` 源码理解

> 迭代集合需要的时间比例和 *HashMap* 的实例容量大小和 load factor 有关系
> <font color="blue">重点：别把初始化容量设置的太大，也别把加载因子设置得太小，如果对迭代的性能有要求的时候</font>
>
> 影响 *HashMap* 的性能有： 初始化容量 和 加载因子
> 当 *HashMap* 容量超过了 加载因子和当前容量乘积 时，hash table 将会重建 (内部的数据结构也将会重新构建)，*hash table* 将会两倍于现在

```java
Map<String, String> map = new HashMap<>();
->
JDK 1.8
初始化 HashMap 默认的初始容量 (数组长度) 为 16 [1 << 4]，加载因子为 0.75
注意：默认的初始容量必须为 2 的整次方。容量在阈值后会扩展 2 倍大小。
由 list 变为 tree 存储的阈值，必须大于 2 且至少为 8. (默认的第一次阈值为 12 = 16 * 0.75)
HashMap 可以存放 null 键和 null 值，但不是线程并发安全的，还不会保证 map 键值的排序
```

###### hash 值的计算

```java
(h = key.hashCode()) ^ (h >>> 16)
^ (异或) [當兩兩數值相同為否，而數值不同時為真]
```

###### `put()`

> 放到 map 中的位置为 `tab[i = (n - 1) & hash]`  (n 为 tab 的长度，容量大小)，当该位置为 `null` 时，直接放入该位置。 *长度 - 1 与 hash 的求与运算*